# Web Amigos Job Board

It's workshops project which uses 3 applications:

- Admin Panel (`React`),
- Frontend for visitors (`Next.js`),
- Backend `NestJS`
  and few libraries like `common-ui` and `prisma`.

![Simplified structure](./docs/wa-jobboard.jpg 'a title')

## Demo:

You can check working applications using below links:

- [Frontend (Next.js)](https://workshops-16-17-production.up.railway.app/)
- [Admin Panel (React)](https://admin-panel-production-3ed0.up.railway.app/)
- [Backend (NestJS)](https://backend-production-df90.up.railway.app/api)

### Env variables

Each application has it's own env variables set but in most cases DATABASE_URL is needed to connect to database from `frontend` and `backend` applications.

Create `.env.local` files as below:

```
- admin-panel
 | - env.local
- backend
 | - env.local
- frontend
 | - env.local
- prisma
 | - env.local
```

Content for each file is described in sections below.

### Local development

Below are described command for each application but you need database (Postgres) and initial structure

To create initial structure make sure that you have `DATABASE_URL` inside `prisma/.env.local` and then run command:

`npx nx run prisma:migrate-deploy`

This will read migrations from `prisma/migrations` and will apply to your database.

To feed database with initial values run:

`npx nx run prisma:seed`

### Using Docker

Inside root directory you can find `docker-compose.yml` file with basic configuration. To run local database you can enter:

`docker compose up`

then set your `DATABASE_URL=postgresql://postgres:pass123@localhost:5432/jobboard` in `.env.local` files inside `admin-panel`, `frontend`, `backend` and `prisma` directories.

Now it's time to make initial structure:

`npx nx run prisma:migrate-deploy`

To feed database with initial values run:

`npx nx run prisma:seed`

That's all! Happy programming ðŸŽ‰

Note: Prisma may occur an error if you place your database connection string inside quotes (`"`)

### Deployment

Each application (`admin-panel`, `frontend`, `backend`) has it's own build and deployment setup which you can find in `railway.toml` files

## Frontend App

Role of this application is to make public gateway for visitors to create new Job Offer. Only accepted job offers are visible (offer can be accepted only via Admin Panel).

### Env variables (.env.local or on your server)

You can place .env.local inside `frontend` directory

`DATABASE_URL` - url string to your database

`NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` - you will get this in your Clerk.com account
`CLERK_SECRET_KEY` - you will get this in your Clerk.com account

### Commands

#### Serve

Run `npx nx serve frontend` and open browser at http://localhost:4200

### Storybook

Run `npx nx storybook frontend` and open browser at http://localhost:4400/

## Common UI library

### Storybook

Run `npx nx storybook common-ui` and open browser at http://localhost:4600/

## Admin Panel App

Run `npx nx serve admin-panel` and open browser at http://localhost:4800/

### Env variables (.env.local or on your server)

You can place .env.local inside `admin-panel` directory

`VITE_API_BASE_URL` - URL to the backend e.g:

```sh
VITE_API_BASE_URL="http://localhost:3000/api"
```

## Backend App

### Env variables (.env.local or on your server)

You can place .env.local inside `backend` directory

`DATABASE_URL` - url string to your database

### Commands

Run `npx nx serve backend` and server will listen to requests at http://localhost:3000/api

## Prisma

### Env variables (.env.local or on your server)

You can place .env.local inside `prisma` directory

`DATABASE_URL` - url string to your database

### Commands

Run `npx nx run prisma:generate-types` to generate types

To run migrations in interactive mode you can change directory to: prisma/src/lib/, export DATABASE_URL variable (see below) and run:

`prisma migrate dev --name NAME_OF_YOUR_MIGRATION`

To open prisma studio, you can run `npx nx run prisma:studio`

---

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

âœ¨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** âœ¨

## Generate code

If you happen to use Nx plugins, you can leverage code generators that might come with it.

Run `nx list` to get a list of available plugins and whether they have generators. Then run `nx list <plugin-name>` to see what generators are available.

Learn more about [Nx generators on the docs](https://nx.dev/plugin-features/use-code-generators).

## Running tasks

To execute tasks with Nx use the following syntax:

```
nx <target> <project> <...options>
```

You can also run multiple targets:

```
nx run-many -t <target1> <target2>
```

..or add `-p` to filter specific projects

```
nx run-many -t <target1> <target2> -p <proj1> <proj2>
```

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/core-features/run-tasks).

## Want better Editor Integration?

Have a look at the [Nx Console extensions](https://nx.dev/nx-console). It provides autocomplete support, a UI for exploring and running tasks & generators, and more! Available for VSCode, IntelliJ and comes with a LSP for Vim users.

## Ready to deploy?

Just run `nx build demoapp` to build the application. The build artifacts will be stored in the `dist/` directory, ready to be deployed.

## Set up CI!

Nx comes with local caching already built-in (check your `nx.json`). On CI you might want to go a step further.

- [Set up remote caching](https://nx.dev/core-features/share-your-cache)
- [Set up task distribution across multiple machines](https://nx.dev/nx-cloud/features/distribute-task-execution)
- [Learn more how to setup CI](https://nx.dev/recipes/ci)

## Connect with us!

- [Join the community](https://nx.dev/community)
- [Subscribe to the Nx Youtube Channel](https://www.youtube.com/@nxdevtools)
- [Follow us on Twitter](https://twitter.com/nxdevtools)
